<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tj720.admin.dao.map.BjMuseumBaseInfoMapper">
  <resultMap id="BaseResultMap" type="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="museum_id" jdbcType="VARCHAR" property="museumId" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="museum_type" jdbcType="VARCHAR" property="museumType" />
    <result column="province" jdbcType="VARCHAR" property="province" />
    <result column="city" jdbcType="VARCHAR" property="city" />
    <result column="area" jdbcType="VARCHAR" property="area" />
    <result column="detail_address" jdbcType="VARCHAR" property="detailAddress" />
    <result column="web_url" jdbcType="VARCHAR" property="webUrl" />
    <result column="mailbox" jdbcType="VARCHAR" property="mailbox" />
    <result column="fax" jdbcType="VARCHAR" property="fax" />
    <result column="zip_code" jdbcType="VARCHAR" property="zipCode" />
    <result column="first_open_date" jdbcType="TIMESTAMP" property="firstOpenDate" />
    <result column="is_free" jdbcType="VARCHAR" property="isFree" />
    <result column="static_close_day" jdbcType="VARCHAR" property="staticCloseDay" />
    <result column="registration_number" jdbcType="VARCHAR" property="registrationNumber" />
    <result column="legal_person" jdbcType="VARCHAR" property="legalPerson" />
    <result column="is_independent_person" jdbcType="VARCHAR" property="isIndependentPerson" />
    <result column="registration_office" jdbcType="VARCHAR" property="registrationOffice" />
    <result column="legal_person_type" jdbcType="VARCHAR" property="legalPersonType" />
    <result column="legal_person_number" jdbcType="VARCHAR" property="legalPersonNumber" />
    <result column="certification_level" jdbcType="VARCHAR" property="certificationLevel" />
    <result column="create_by" jdbcType="VARCHAR" property="createBy" />
    <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
    <result column="update_by" jdbcType="VARCHAR" property="updateBy" />
    <result column="update_date" jdbcType="TIMESTAMP" property="updateDate" />
    <result column="remarks" jdbcType="VARCHAR" property="remarks" />
    <result column="del_flag" jdbcType="VARCHAR" property="delFlag" />
    <result column="museum_description" jdbcType="LONGVARCHAR" property="museumDescription" />
  </resultMap>
  
  
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    <result column="museum_description" jdbcType="LONGVARCHAR" property="museumDescription" />
  </resultMap>
  
  <resultMap  id="ResultMapWithOrg" type="java.util.HashMap">
    <result column="museum_id" jdbcType="VARCHAR" property="museumId" />
    <result column="area" jdbcType="VARCHAR" property="area" />
    <result column="name" jdbcType="VARCHAR" property="name" />
  </resultMap>
   <resultMap  id="ResultMapWithDetail" type="java.util.HashMap">
    <result column="museum_id" jdbcType="VARCHAR" property="museumId" />   
    <result column="detail_address" jdbcType="VARCHAR" property="detailAddress" />
    <result column="museum_description" jdbcType="LONGVARCHAR" property="museumDescription" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="english_name" jdbcType="VARCHAR" property="englishName" />
    <result column="level" jdbcType="VARCHAR" property="level" />
    <result column="imageUrl" jdbcType="VARCHAR" property="imageUrl" />
  </resultMap>
   <resultMap  id="ResultMapWithCollection" type="java.util.HashMap">
    <result column="museum_id" jdbcType="VARCHAR" property="museumId" />
   
    <result column="detail_address" jdbcType="VARCHAR" property="detailAddress" />
    <result column="museum_description" jdbcType="LONGVARCHAR" property="museumDescription" />
    <result column="name" jdbcType="VARCHAR" property="name" />
  </resultMap>
  
  <resultMap  id="countMap" type="java.util.HashMap">
    <result column="museumCount" jdbcType="INTEGER" property="museumCount" />
    <result column="userCount" jdbcType="INTEGER" property="userCount" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    id, museum_id, phone, museum_type, province, city, area, detail_address, web_url, 
    mailbox, fax, zip_code, first_open_date, is_free, static_close_day, registration_number, 
    legal_person, is_independent_person, registration_office, legal_person_type, legal_person_number, 
    certification_level, create_by, create_date, update_by, update_date, remarks, del_flag
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    museum_description
  </sql>
  <select id="selectByExampleWithBLOBs" parameterType="com.tj720.mip.dto.BjMuseumBaseInfoExample" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from bj_museum_base_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" parameterType="com.tj720.mip.dto.BjMuseumBaseInfoExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from bj_museum_base_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from bj_museum_base_info
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    delete from bj_museum_base_info
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.tj720.mip.dto.BjMuseumBaseInfoExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    delete from bj_museum_base_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    insert into bj_museum_base_info (id, museum_id, phone, 
      museum_type, province, city, 
      area, detail_address, web_url, 
      mailbox, fax, zip_code, 
      first_open_date, is_free, static_close_day, 
      registration_number, legal_person, is_independent_person, 
      registration_office, legal_person_type, legal_person_number, 
      certification_level, create_by, create_date, 
      update_by, update_date, remarks, 
      del_flag, museum_description)
    values (#{id,jdbcType=VARCHAR}, #{museumId,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, 
      #{museumType,jdbcType=VARCHAR}, #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, 
      #{area,jdbcType=VARCHAR}, #{detailAddress,jdbcType=VARCHAR}, #{webUrl,jdbcType=VARCHAR}, 
      #{mailbox,jdbcType=VARCHAR}, #{fax,jdbcType=VARCHAR}, #{zipCode,jdbcType=VARCHAR}, 
      #{firstOpenDate,jdbcType=TIMESTAMP}, #{isFree,jdbcType=VARCHAR}, #{staticCloseDay,jdbcType=VARCHAR}, 
      #{registrationNumber,jdbcType=VARCHAR}, #{legalPerson,jdbcType=VARCHAR}, #{isIndependentPerson,jdbcType=VARCHAR}, 
      #{registrationOffice,jdbcType=VARCHAR}, #{legalPersonType,jdbcType=VARCHAR}, #{legalPersonNumber,jdbcType=VARCHAR}, 
      #{certificationLevel,jdbcType=VARCHAR}, #{createBy,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP}, 
      #{updateBy,jdbcType=VARCHAR}, #{updateDate,jdbcType=TIMESTAMP}, #{remarks,jdbcType=VARCHAR}, 
      #{delFlag,jdbcType=VARCHAR}, #{museumDescription,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    insert into bj_museum_base_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="museumId != null">
        museum_id,
      </if>
      <if test="phone != null">
        phone,
      </if>
      <if test="museumType != null">
        museum_type,
      </if>
      <if test="province != null">
        province,
      </if>
      <if test="city != null">
        city,
      </if>
      <if test="area != null">
        area,
      </if>
      <if test="detailAddress != null">
        detail_address,
      </if>
      <if test="webUrl != null">
        web_url,
      </if>
      <if test="mailbox != null">
        mailbox,
      </if>
      <if test="fax != null">
        fax,
      </if>
      <if test="zipCode != null">
        zip_code,
      </if>
      <if test="firstOpenDate != null">
        first_open_date,
      </if>
      <if test="isFree != null">
        is_free,
      </if>
      <if test="staticCloseDay != null">
        static_close_day,
      </if>
      <if test="registrationNumber != null">
        registration_number,
      </if>
      <if test="legalPerson != null">
        legal_person,
      </if>
      <if test="isIndependentPerson != null">
        is_independent_person,
      </if>
      <if test="registrationOffice != null">
        registration_office,
      </if>
      <if test="legalPersonType != null">
        legal_person_type,
      </if>
      <if test="legalPersonNumber != null">
        legal_person_number,
      </if>
      <if test="certificationLevel != null">
        certification_level,
      </if>
      <if test="createBy != null">
        create_by,
      </if>
      <if test="createDate != null">
        create_date,
      </if>
      <if test="updateBy != null">
        update_by,
      </if>
      <if test="updateDate != null">
        update_date,
      </if>
      <if test="remarks != null">
        remarks,
      </if>
      <if test="delFlag != null">
        del_flag,
      </if>
      <if test="museumDescription != null">
        museum_description,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="museumId != null">
        #{museumId,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="museumType != null">
        #{museumType,jdbcType=VARCHAR},
      </if>
      <if test="province != null">
        #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null">
        #{city,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="detailAddress != null">
        #{detailAddress,jdbcType=VARCHAR},
      </if>
      <if test="webUrl != null">
        #{webUrl,jdbcType=VARCHAR},
      </if>
      <if test="mailbox != null">
        #{mailbox,jdbcType=VARCHAR},
      </if>
      <if test="fax != null">
        #{fax,jdbcType=VARCHAR},
      </if>
      <if test="zipCode != null">
        #{zipCode,jdbcType=VARCHAR},
      </if>
      <if test="firstOpenDate != null">
        #{firstOpenDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isFree != null">
        #{isFree,jdbcType=VARCHAR},
      </if>
      <if test="staticCloseDay != null">
        #{staticCloseDay,jdbcType=VARCHAR},
      </if>
      <if test="registrationNumber != null">
        #{registrationNumber,jdbcType=VARCHAR},
      </if>
      <if test="legalPerson != null">
        #{legalPerson,jdbcType=VARCHAR},
      </if>
      <if test="isIndependentPerson != null">
        #{isIndependentPerson,jdbcType=VARCHAR},
      </if>
      <if test="registrationOffice != null">
        #{registrationOffice,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonType != null">
        #{legalPersonType,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonNumber != null">
        #{legalPersonNumber,jdbcType=VARCHAR},
      </if>
      <if test="certificationLevel != null">
        #{certificationLevel,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="updateDate != null">
        #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remarks != null">
        #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="delFlag != null">
        #{delFlag,jdbcType=VARCHAR},
      </if>
      <if test="museumDescription != null">
        #{museumDescription,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.tj720.mip.dto.BjMuseumBaseInfoExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    select count(*) from bj_museum_base_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    <set>
      <if test="record.id != null">
        id = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.museumId != null">
        museum_id = #{record.museumId,jdbcType=VARCHAR},
      </if>
      <if test="record.phone != null">
        phone = #{record.phone,jdbcType=VARCHAR},
      </if>
      <if test="record.museumType != null">
        museum_type = #{record.museumType,jdbcType=VARCHAR},
      </if>
      <if test="record.province != null">
        province = #{record.province,jdbcType=VARCHAR},
      </if>
      <if test="record.city != null">
        city = #{record.city,jdbcType=VARCHAR},
      </if>
      <if test="record.area != null">
        area = #{record.area,jdbcType=VARCHAR},
      </if>
      <if test="record.detailAddress != null">
        detail_address = #{record.detailAddress,jdbcType=VARCHAR},
      </if>
      <if test="record.webUrl != null">
        web_url = #{record.webUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.mailbox != null">
        mailbox = #{record.mailbox,jdbcType=VARCHAR},
      </if>
      <if test="record.fax != null">
        fax = #{record.fax,jdbcType=VARCHAR},
      </if>
      <if test="record.zipCode != null">
        zip_code = #{record.zipCode,jdbcType=VARCHAR},
      </if>
      <if test="record.firstOpenDate != null">
        first_open_date = #{record.firstOpenDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.isFree != null">
        is_free = #{record.isFree,jdbcType=VARCHAR},
      </if>
      <if test="record.staticCloseDay != null">
        static_close_day = #{record.staticCloseDay,jdbcType=VARCHAR},
      </if>
      <if test="record.registrationNumber != null">
        registration_number = #{record.registrationNumber,jdbcType=VARCHAR},
      </if>
      <if test="record.legalPerson != null">
        legal_person = #{record.legalPerson,jdbcType=VARCHAR},
      </if>
      <if test="record.isIndependentPerson != null">
        is_independent_person = #{record.isIndependentPerson,jdbcType=VARCHAR},
      </if>
      <if test="record.registrationOffice != null">
        registration_office = #{record.registrationOffice,jdbcType=VARCHAR},
      </if>
      <if test="record.legalPersonType != null">
        legal_person_type = #{record.legalPersonType,jdbcType=VARCHAR},
      </if>
      <if test="record.legalPersonNumber != null">
        legal_person_number = #{record.legalPersonNumber,jdbcType=VARCHAR},
      </if>
      <if test="record.certificationLevel != null">
        certification_level = #{record.certificationLevel,jdbcType=VARCHAR},
      </if>
      <if test="record.createBy != null">
        create_by = #{record.createBy,jdbcType=VARCHAR},
      </if>
      <if test="record.createDate != null">
        create_date = #{record.createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateBy != null">
        update_by = #{record.updateBy,jdbcType=VARCHAR},
      </if>
      <if test="record.updateDate != null">
        update_date = #{record.updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.remarks != null">
        remarks = #{record.remarks,jdbcType=VARCHAR},
      </if>
      <if test="record.delFlag != null">
        del_flag = #{record.delFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.museumDescription != null">
        museum_description = #{record.museumDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    set id = #{record.id,jdbcType=VARCHAR},
      museum_id = #{record.museumId,jdbcType=VARCHAR},
      phone = #{record.phone,jdbcType=VARCHAR},
      museum_type = #{record.museumType,jdbcType=VARCHAR},
      province = #{record.province,jdbcType=VARCHAR},
      city = #{record.city,jdbcType=VARCHAR},
      area = #{record.area,jdbcType=VARCHAR},
      detail_address = #{record.detailAddress,jdbcType=VARCHAR},
      web_url = #{record.webUrl,jdbcType=VARCHAR},
      mailbox = #{record.mailbox,jdbcType=VARCHAR},
      fax = #{record.fax,jdbcType=VARCHAR},
      zip_code = #{record.zipCode,jdbcType=VARCHAR},
      first_open_date = #{record.firstOpenDate,jdbcType=TIMESTAMP},
      is_free = #{record.isFree,jdbcType=VARCHAR},
      static_close_day = #{record.staticCloseDay,jdbcType=VARCHAR},
      registration_number = #{record.registrationNumber,jdbcType=VARCHAR},
      legal_person = #{record.legalPerson,jdbcType=VARCHAR},
      is_independent_person = #{record.isIndependentPerson,jdbcType=VARCHAR},
      registration_office = #{record.registrationOffice,jdbcType=VARCHAR},
      legal_person_type = #{record.legalPersonType,jdbcType=VARCHAR},
      legal_person_number = #{record.legalPersonNumber,jdbcType=VARCHAR},
      certification_level = #{record.certificationLevel,jdbcType=VARCHAR},
      create_by = #{record.createBy,jdbcType=VARCHAR},
      create_date = #{record.createDate,jdbcType=TIMESTAMP},
      update_by = #{record.updateBy,jdbcType=VARCHAR},
      update_date = #{record.updateDate,jdbcType=TIMESTAMP},
      remarks = #{record.remarks,jdbcType=VARCHAR},
      del_flag = #{record.delFlag,jdbcType=VARCHAR},
      museum_description = #{record.museumDescription,jdbcType=LONGVARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    set id = #{record.id,jdbcType=VARCHAR},
      museum_id = #{record.museumId,jdbcType=VARCHAR},
      phone = #{record.phone,jdbcType=VARCHAR},
      museum_type = #{record.museumType,jdbcType=VARCHAR},
      province = #{record.province,jdbcType=VARCHAR},
      city = #{record.city,jdbcType=VARCHAR},
      area = #{record.area,jdbcType=VARCHAR},
      detail_address = #{record.detailAddress,jdbcType=VARCHAR},
      web_url = #{record.webUrl,jdbcType=VARCHAR},
      mailbox = #{record.mailbox,jdbcType=VARCHAR},
      fax = #{record.fax,jdbcType=VARCHAR},
      zip_code = #{record.zipCode,jdbcType=VARCHAR},
      first_open_date = #{record.firstOpenDate,jdbcType=TIMESTAMP},
      is_free = #{record.isFree,jdbcType=VARCHAR},
      static_close_day = #{record.staticCloseDay,jdbcType=VARCHAR},
      registration_number = #{record.registrationNumber,jdbcType=VARCHAR},
      legal_person = #{record.legalPerson,jdbcType=VARCHAR},
      is_independent_person = #{record.isIndependentPerson,jdbcType=VARCHAR},
      registration_office = #{record.registrationOffice,jdbcType=VARCHAR},
      legal_person_type = #{record.legalPersonType,jdbcType=VARCHAR},
      legal_person_number = #{record.legalPersonNumber,jdbcType=VARCHAR},
      certification_level = #{record.certificationLevel,jdbcType=VARCHAR},
      create_by = #{record.createBy,jdbcType=VARCHAR},
      create_date = #{record.createDate,jdbcType=TIMESTAMP},
      update_by = #{record.updateBy,jdbcType=VARCHAR},
      update_date = #{record.updateDate,jdbcType=TIMESTAMP},
      remarks = #{record.remarks,jdbcType=VARCHAR},
      del_flag = #{record.delFlag,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    <set>
      <if test="museumId != null">
        museum_id = #{museumId,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="museumType != null">
        museum_type = #{museumType,jdbcType=VARCHAR},
      </if>
      <if test="province != null">
        province = #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null">
        city = #{city,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="detailAddress != null">
        detail_address = #{detailAddress,jdbcType=VARCHAR},
      </if>
      <if test="webUrl != null">
        web_url = #{webUrl,jdbcType=VARCHAR},
      </if>
      <if test="mailbox != null">
        mailbox = #{mailbox,jdbcType=VARCHAR},
      </if>
      <if test="fax != null">
        fax = #{fax,jdbcType=VARCHAR},
      </if>
      <if test="zipCode != null">
        zip_code = #{zipCode,jdbcType=VARCHAR},
      </if>
      <if test="firstOpenDate != null">
        first_open_date = #{firstOpenDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isFree != null">
        is_free = #{isFree,jdbcType=VARCHAR},
      </if>
      <if test="staticCloseDay != null">
        static_close_day = #{staticCloseDay,jdbcType=VARCHAR},
      </if>
      <if test="registrationNumber != null">
        registration_number = #{registrationNumber,jdbcType=VARCHAR},
      </if>
      <if test="legalPerson != null">
        legal_person = #{legalPerson,jdbcType=VARCHAR},
      </if>
      <if test="isIndependentPerson != null">
        is_independent_person = #{isIndependentPerson,jdbcType=VARCHAR},
      </if>
      <if test="registrationOffice != null">
        registration_office = #{registrationOffice,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonType != null">
        legal_person_type = #{legalPersonType,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonNumber != null">
        legal_person_number = #{legalPersonNumber,jdbcType=VARCHAR},
      </if>
      <if test="certificationLevel != null">
        certification_level = #{certificationLevel,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null">
        create_by = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null">
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        update_by = #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="updateDate != null">
        update_date = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remarks != null">
        remarks = #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="delFlag != null">
        del_flag = #{delFlag,jdbcType=VARCHAR},
      </if>
      <if test="museumDescription != null">
        museum_description = #{museumDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    set museum_id = #{museumId,jdbcType=VARCHAR},
      phone = #{phone,jdbcType=VARCHAR},
      museum_type = #{museumType,jdbcType=VARCHAR},
      province = #{province,jdbcType=VARCHAR},
      city = #{city,jdbcType=VARCHAR},
      area = #{area,jdbcType=VARCHAR},
      detail_address = #{detailAddress,jdbcType=VARCHAR},
      web_url = #{webUrl,jdbcType=VARCHAR},
      mailbox = #{mailbox,jdbcType=VARCHAR},
      fax = #{fax,jdbcType=VARCHAR},
      zip_code = #{zipCode,jdbcType=VARCHAR},
      first_open_date = #{firstOpenDate,jdbcType=TIMESTAMP},
      is_free = #{isFree,jdbcType=VARCHAR},
      static_close_day = #{staticCloseDay,jdbcType=VARCHAR},
      registration_number = #{registrationNumber,jdbcType=VARCHAR},
      legal_person = #{legalPerson,jdbcType=VARCHAR},
      is_independent_person = #{isIndependentPerson,jdbcType=VARCHAR},
      registration_office = #{registrationOffice,jdbcType=VARCHAR},
      legal_person_type = #{legalPersonType,jdbcType=VARCHAR},
      legal_person_number = #{legalPersonNumber,jdbcType=VARCHAR},
      certification_level = #{certificationLevel,jdbcType=VARCHAR},
      create_by = #{createBy,jdbcType=VARCHAR},
      create_date = #{createDate,jdbcType=TIMESTAMP},
      update_by = #{updateBy,jdbcType=VARCHAR},
      update_date = #{updateDate,jdbcType=TIMESTAMP},
      remarks = #{remarks,jdbcType=VARCHAR},
      del_flag = #{delFlag,jdbcType=VARCHAR},
      museum_description = #{museumDescription,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.tj720.mip.dto.BjMuseumBaseInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 09 14:56:54 CST 2018.
    -->
    update bj_museum_base_info
    set museum_id = #{museumId,jdbcType=VARCHAR},
      phone = #{phone,jdbcType=VARCHAR},
      museum_type = #{museumType,jdbcType=VARCHAR},
      province = #{province,jdbcType=VARCHAR},
      city = #{city,jdbcType=VARCHAR},
      area = #{area,jdbcType=VARCHAR},
      detail_address = #{detailAddress,jdbcType=VARCHAR},
      web_url = #{webUrl,jdbcType=VARCHAR},
      mailbox = #{mailbox,jdbcType=VARCHAR},
      fax = #{fax,jdbcType=VARCHAR},
      zip_code = #{zipCode,jdbcType=VARCHAR},
      first_open_date = #{firstOpenDate,jdbcType=TIMESTAMP},
      is_free = #{isFree,jdbcType=VARCHAR},
      static_close_day = #{staticCloseDay,jdbcType=VARCHAR},
      registration_number = #{registrationNumber,jdbcType=VARCHAR},
      legal_person = #{legalPerson,jdbcType=VARCHAR},
      is_independent_person = #{isIndependentPerson,jdbcType=VARCHAR},
      registration_office = #{registrationOffice,jdbcType=VARCHAR},
      legal_person_type = #{legalPersonType,jdbcType=VARCHAR},
      legal_person_number = #{legalPersonNumber,jdbcType=VARCHAR},
      certification_level = #{certificationLevel,jdbcType=VARCHAR},
      create_by = #{createBy,jdbcType=VARCHAR},
      create_date = #{createDate,jdbcType=TIMESTAMP},
      update_by = #{updateBy,jdbcType=VARCHAR},
      update_date = #{updateDate,jdbcType=TIMESTAMP},
      remarks = #{remarks,jdbcType=VARCHAR},
      del_flag = #{delFlag,jdbcType=VARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
   <select id="getBjMuseumBaseInfoList"  resultMap="ResultMapWithOrg">
    	select b.museum_id,ma.name as area,g.name as name
    	 from bj_museum_base_info b,mip_organization g,mip_area ma  
    	 where g.id = b.museum_id
    	 and ma.id = b.area
    	 and b.del_flag = 2 and g.status = 1
    	 order by g.created_time
  </select>
  <select id="getBjMuseumSpreadtrumByMuseumId"  resultType="java.util.HashMap">
    	select s.id,s.headline,s.picture_id as picUrl,o.name as orgname,s.begin_time as beginDate,s.end_time as endDate,s.content,s.exhibition_type as exhibitionType, s.viMoveUrl
    from mip_spreadtrum s 
    	left join mip_organization o on o.id = s.org_id 
    where  s.status = 1 and o.status = 1
    <if test=" museumId != null and museumId != ''">
		and s.org_id = 	#{museumId}
	</if>   	    
	<if test=" type != null and type != ''">
		and s.exhibition_type = #{type}
	</if>    	    
	<if test=" startRow == -1">
		limit #{pageSize}
	</if>
	<if test=" startRow != -1">
		limit #{startRow},#{pageSize}
	</if>
  </select>
  
  <select id="countBjMuseumSpreadtrumByMuseumId"  resultType="java.lang.Integer">
    	select count(1)
    from mip_spreadtrum s 
    	left join mip_organization o on o.id = s.org_id
    where  s.status = 1 and o.status = 1
    <if test=" museumId != null and museumId != ''">
		and s.org_id = 	#{museumId}
	</if>   	    
	<if test=" type != null and type != ''">
		and s.exhibition_type = #{type}
	</if>   
	
  </select>
  
  <select id="getBjMuseumBaseInfoByMuseumId" resultType="java.util.Map">
    select b.museum_id as id,b.detail_address as detailAddress,b.museum_description as description,b.image_url as imageUrl,b.close_type as closeType, b.static_close_day as staticCloseDay,
    <if test="userid != null and userid != ''">
	(case when c.id is null or c.id = '' then 0 else 1 end) as iscollection,  
	</if>
    g.name as name, b.bus_line as busLine, b.subway_line as subwayLine , b.park_area as parkArea, b.geography, b.area, g.latitude, g.longitude
    	 from bj_museum_base_info b
    	 inner join mip_organization g on(g.status = 1 and g.id = b.museum_id)  
    	 <if test="userid != null and userid != ''">
		left join mip_collect c on(c.type=2 and c.uid=#{userid} and c.status=1 and c.cid=g.id and g.`status` = '1')
		</if>
    	 where 1=1
   	     and b.museum_id = #{museumId}
   	     and b.del_flag = 2
  </select>
  
  <select id="getBjMuseumCollectionByMuseumId" parameterType="java.lang.String" resultType="java.util.HashMap">
    	select c.id,c.name,c.picture_ids as pictureIds from mip_open_collection_info c
    	where 
		 1=1
		 <if test="museumId != null">
			AND c.collection_unit = #{museumId}
		</if>		 			
		 <if test="type != null and type != '' and type != 'cm'">
			AND c.collections_category = #{type}
		</if>		 			
		<if test="type != null and type != '' and type == 'cm'">
			AND c.collections_category not in('1','2','4','5','7','10','14','3','20')
		</if>
		order by c.click_counts desc
        <if test=" startRow == -1">
			limit #{pageSize}
		</if>
		<if test=" startRow != -1">
			limit #{startRow},#{pageSize}
		</if>	 
  </select>
  
  <select id="countBjMuseumCollectionByMuseumId" parameterType="java.lang.String" resultType="java.lang.Integer">
    	select count(1)
    	from mip_open_collection_info c
    	where 
		 1=1
		 <if test="museumId != null">
			AND c.collection_unit = #{museumId}
		</if>		 	
		<if test="type != null and type != '' and type != '000'">
			AND c.collections_category = #{type}
		</if>		 			
		<if test="type != null and type != '' and type == '000'">
			AND c.collections_category not in('1','2','4','5','7','10','14','3','20')
		</if>
  </select>
  
  <select id="getMuseumInformationByMuseumId" parameterType="java.lang.String" resultType="java.util.HashMap">
    	select museum_id as museumId,detail_address as detailAddress,bus_line as busLine
    	,subway_line as subwayLine,park_area as parkArea,geography
 		from bj_museum_base_info where museum_id = #{museumId}		 		 
 		and del_flag = 2
  </select>
  
  
  <select id="getBjMuseumCountAndUserCount"  resultMap="countMap">
   		select count(b.museum_id) as museumCount,(select max(visit_count) from bj_museum_visit
   		where visit_type = 1
   		) as userCount from bj_museum_base_info b
   		inner join mip_organization c on(b.museum_id=c.id)
   		where b.del_flag = 2
		and c.`status` = '1'
  </select>
  
   <select id="getUserCount" resultType="java.lang.Integer">
        select visit_count from bj_museum_visit
        where visit_type = #{type}
  </select>
  
  <insert id="insertUserCount">
        insert into bj_museum_visit 
        values(select max(visit_id)+1 from bj_museum_visit,#{type},#{count})
  </insert>
  
  <update id="setUserCount">
        update bj_museum_visit set visit_count = #{count}
        where visit_type = #{type}
  </update>
  
  <select id="getIndexCarousels" resultType="java.util.HashMap">
     select picture_id as picUrl,url as gotoUrl,title
    from mip_carousel 
    where status = 1
    <if test="carouselPositionId != null">
		and carousel_position_id = #{carouselPositionId}
	</if>
	ORDER BY sequence ASC
  </select>
  <select id="getBjMuseumImageList"  resultType="java.util.HashMap">
   		select b.image_url as url,b.museum_id,g.name
   		 from bj_museum_base_info b,mip_organization g
   		 where 1=1 and g.id = b.museum_id
   		 and b.del_flag = 2 and g.status = 1
   		 and g.status = '1'
   		  <if test="museumId != null">
			AND b.museum_id != #{museumId}
		</if>
   		order by g.created_time
        <if test=" startRow == -1">
			limit #{pageSize}
		</if>
		<if test=" startRow != -1">
			limit #{startRow},#{pageSize}
		</if>
  </select>
  
  <select id="countBjMuseumImageList"  resultType="java.lang.Integer">
   		select count(1)
   		 from bj_museum_base_info b,mip_organization g
   		 where 1=1 and g.id = b.museum_id
   		 and b.del_flag = 2 and g.status = 1
   		 and g.status = '1' 
   		  <if test="museumId != null">
			AND b.museum_id != #{museumId}
		</if>
   		order by b.create_date DESC
  </select>
  
  <select id="getBjMuseumConditionList"  resultType="java.util.HashMap">
   		select b.museum_id as museumId,ma.name as name,p.name as area from bj_museum_base_info b,mip_organization p,mip_area ma
		where b.museum_id = p.id
		and ma.id = b.area
		and b.del_flag = 2 and p.status = 1
		<if test="name != null">
			and p.name like '%'||#{name}||'%'
		</if>
		<if test="area != null">
			and ma.name = #{area}
		</if>				
  </select>
  
  <select id="getVirtualByMuseumId"  resultType="java.util.Map">
   		select t.id, t.viName as name, t.viIntro,t.viPCUrl, t.viMoveUrl, t.picture_id as picUrl 
   		from mip_virtual_exibition_hall t
			where t.`status` = '1'
		<if test="orgId != null">
			and t.org_id = #{orgId}
		</if>
		order by t.publish_time desc
  </select>
  
  <select id="getArticleByUniqueName"  resultType="java.util.Map">
   		select a.id, a.title, a.description, a.publish_time as publishTime, a.content , a.publisher, a.title_image_src as titleImageSrc,
   		substring(a.publish_time,1,4) as publishYear,substring(a.publish_time,5,2) as publishMonth,substring(a.publish_time,7,2) as publishDay
			from cms_article a
			INNER JOIN cms_subject b on(a.subject_id = b.id)
			where b.unique_name = #{uniqueName}
			and a.status = '2'
			and a.publisher
		<if test="orgId != null">
			and a.publisher = #{orgId}
		</if>
		order by a.publish_time desc
		<if test=" size != null">
			limit #{size}
		</if>
  </select>
  
  <select id="getMuseumListByAreaAndKey"  resultType="java.util.Map">
   		select a.id, a.`name`, b.detail_address as detailAddress, b.image_url as imageUrl  from mip_organization a
			 INNER JOIN bj_museum_base_info b on(a.id = b.museum_id and b.del_flag = '2')
			where a.org_type_id = '3'
		<if test="name != null and name != ''">
			and a.name like concat('%',#{name},'%')
		</if>
		<if test="area != null and area != ''">
			and b.area = #{area}
		</if>
		order by b.area
		<if test=" startRow == -1">
			limit #{pageSize}
		</if>
		<if test=" startRow != -1">
			limit #{startRow},#{pageSize}
		</if>
  </select>
  
  <select id="countMuseumListByAreaAndKey"  resultType="java.lang.Integer">
   		select count(*) 
   			from mip_organization a
			 INNER JOIN bj_museum_base_info b on(a.id = b.museum_id and b.del_flag = '2')
			where a.org_type_id = '3'
		<if test="name != null and name != ''">
			and a.name like concat('%',#{name},'%')
		</if>
		<if test="area != null and area != ''">
			and b.area = #{area}
		</if>
		order by b.area
  </select>
  
  <select id="getCollectionTypeByMuseum"  resultType="java.util.Map">
   		select a.collections_category, b.`name` from mip_open_collection_info a
			left join mip_collection_category b on b.id = a.collections_category
			where 1=1
		<if test="orgId != null and orgId != ''">
			and a.collection_unit = #{orgId}
		</if>
			group by a.collections_category;
  </select>
  
  <resultMap id="map" type="com.tj720.mip.dto.EveryDayMuseumDto" >      
  </resultMap>
   <select id="getEveryDayMuseumList"  resultMap="map">
    	select mo.id as orgId,mo.name as orgName,mbi.image_url as orgImgUrl
    	 from bj_museum_base_info mbi,mip_organization mo 
    	 where mo.id = mbi.museum_id
    	 and mo.status = 1
    	 and mo.org_type_id = 3
    	 and mbi.del_flag = 2
    	 and EXISTS(select id from mip_spreadtrum 
				where status = 1
				and org_id = mo.id)
		 and EXISTS(select id from mip_open_collection_info 
				where collection_unit = mo.id)
    	 order by mo.sequence
    	 limit 31
  	</select>
  <select id="getEveryDayMuseumSpr"  resultMap="map">
    	select id as sprId ,picture_id as sprImgUrl
    	 from mip_spreadtrum  
    	 where status = 1
    	 and org_id = #{orgId}
    	 order by click_number
    	 limit 1
  	</select>
  <select id="getEveryDayMuseumColl"  resultMap="map">
    	select id as collId ,picture_ids as collImgUrl
    	 from mip_open_collection_info  
    	 where 1 = 1
    	 and collection_unit = #{orgId}
    	 order by click_counts
    	 limit 1
  	</select>
  	
  	<select id="getTourListByMuseumId" resultType="com.tj720.admin.model.MipTour" parameterType="java.lang.String">
    select a.id,
		a.name,
		a.icon_url as iconUrl,
		a.label,
		a.listen_number as listenNumber,
		(select count(1) from mip_tour_collection tc 
					left join mip_open_collection_info moci on (tc.collection_id = moci.id) 
					where moci.`status` = '1' and tc.tour_id = a.id) as "collectionNum"
     from mip_tour a where a.status=2
		and a.publish_org=#{museumId}
     ORDER BY a.listen_number desc
  </select>
  
  <select id="getTourDetail" resultType="com.tj720.admin.model.MipTour" parameterType="java.lang.String">
          select a.id,a.name,a.publish_org as "publishOrg",
          a.name,a.address ,a.virtual_url as "virtualUrl",
          a.label,a.introduction,a.icon_url as "iconUrl",
          a.start_date  as "startDate",
          a.end_date  as "endDate",
          a.listen_number as "listenNumber",
          mo.name as "museumName",
           (select count(1) from mip_tour_collection tc 
					left join mip_open_collection_info moci on (tc.collection_id = moci.id) 
					where moci.`status` = '1' and tc.tour_id = a.id) as "collectionNum"
          from mip_tour a,mip_organization mo
          where a.publish_org = mo.id and mo.status=1
          and  a.id=#{id}
  </select>

  <select id="getTourCollectionList" resultType="com.tj720.admin.model.MipToorCollection" parameterType="java.util.Map">
        SELECT
            a.id,
            a.collection_id as "collectionId",
            (select m.url from mip_picture m where m.id = LEFT (
            CONCAT(b.picture_ids, ','),
            LOCATE(',',CONCAT(b.picture_ids, ',')) - 1))AS pictureUrl,
            b.f_audio as "audioUrl",
            b.name  as "collectionName"
      FROM
      mip_tour_collection a,
      mip_open_collection_info b
      WHERE
      a.tour_id = #{id}
      and a.collection_id = b.id
    <if test="type == 2">
      and b.f_audio is not null and b.f_audio !=''
    </if>
      ORDER BY
      a.sort ASC
    <if test="start != null and start !=''">
       limit #{start},#{end}
    </if>
  </select>

  <select id="getPictureList" resultType="com.tj720.admin.model.MipToorCollection" parameterType="java.lang.String">
      SELECT
      a.id,
      a.collection_id as "collectionId",
      (select m.url from mip_picture m where m.id = LEFT (
      CONCAT(b.picture_ids, ','),
      LOCATE(',',CONCAT(b.picture_ids, ',')) - 1))AS pictureUrl,
      b.f_audio as "audioUrl",
      b.name  as "collectionName"
      FROM
      mip_tour  t,
      mip_tour_collection a,
      mip_open_collection_info b
      WHERE t.id = a.tour_id
      and a.collection_id = b.id
      and t.id = #{id}
      ORDER BY
      a.sort ASC
  </select>

  <select id="getCollectionList" resultType="com.tj720.admin.model.MipToorCollection" parameterType="java.lang.String">
    SELECT
    @rownum:=@rownum+1 AS rowNum,
    a.id,
    a.collection_id as "collectionId",
    (select m.url from mip_picture m where m.id = LEFT (
    CONCAT(b.picture_ids, ','),
    LOCATE(',',CONCAT(b.picture_ids, ',')) - 1))AS pictureUrl,
    b.f_audio as "audioUrl",
    b.name  as "collectionName",
    b.description as "description",
    d.name  as "museumName"
    FROM
    mip_tour_collection a,
    mip_open_collection_info b,
    mip_organization d,
    (SELECT @rownum:=0) r
    WHERE a.collection_id = b.id
    and b.collection_unit = d.id
    and a.tour_id = #{id}
    ORDER BY
    a.sort ASC
  </select>
</mapper>